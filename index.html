<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>archive beat</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  padding:40px 20px;
  background:#faf9f6;
  color:#2b2b2b;
  font-family:
    "Hiragino Mincho ProN",
    "Yu Mincho",
    "Times New Roman",
    serif;
  line-height:1.7;
}

.container{
  max-width:900px;
  margin:0 auto;
}

h1{
  font-size:2.4rem;
  font-weight:normal;
  letter-spacing:.12em;
  margin-bottom:4px;
}

.subtitle{
  font-size:.9rem;
  color:#777;
  margin-bottom:30px;
}

.controls{
  margin-bottom:30px;
}

.controls button{
  background:none;
  border:1px solid #bbb;
  padding:6px 14px;
  margin-right:8px;
  font-family:inherit;
  cursor:pointer;
}

.controls button:hover{
  background:#eee;
}

.note{
  font-size:.85rem;
  color:#666;
  margin-bottom:30px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:24px;
}

.beat{
  background:#fff;
  border:1px solid #e2e2e2;
  padding:18px;
  transition:.3s;
}

.beat:hover{
  box-shadow:0 8px 20px rgba(0,0,0,.08);
}

.title{
  font-size:1rem;
  margin-bottom:6px;
}

.meta{
  font-size:.8rem;
  color:#777;
  margin-bottom:10px;
}

.sold{
  display:inline-block;
  font-size:.7rem;
  border:1px solid #999;
  padding:2px 8px;
  margin-bottom:10px;
  cursor:pointer;
}

.beat.soldout{
  opacity:.45;
}

audio{
  width:100%;
  margin-top:10px;
}

.footer{
  margin-top:60px;
  font-size:.8rem;
  color:#666;
}
</style>
</head>

<body>
<div class="container">

<h1>archive beat</h1>
<div class="subtitle">sound archive by alouji</div>

<div class="controls">
  <button onclick="setLang('jp')">JP</button>
  <button onclick="setLang('en')">EN</button>
</div>

<div class="note"
data-jp="非独占 ¥5,000〜 / 独占 ¥30,000〜｜決済：PayPay・銀行振込（DMまで）"
data-en="Non-exclusive ¥5,000+ / Exclusive ¥30,000+ | Payment via PayPay or Bank Transfer (DM)">
非独占 ¥5,000〜 / 独占 ¥30,000〜｜決済：PayPay・銀行振込（DMまで）
</div>

<input type="file" accept="audio/*" multiple onchange="addBeats(event)">

<div id="list" class="grid"></div>

<div class="footer">
© alouji / archive beat
</div>

</div>

<script>
function setLang(l){
  document.querySelectorAll('[data-jp]').forEach(e=>{
    e.textContent = e.dataset[l]
  })
}

function addBeats(e){
  for(const f of e.target.files){

    const beat=document.createElement('div')
    beat.className='beat'

    const title=document.createElement('div')
    title.className='title'
    title.textContent=f.name

    const meta=document.createElement('div')
    meta.className='meta'
    meta.textContent='BPM: --'

    const sold=document.createElement('div')
    sold.className='sold'
    sold.textContent=''

    const audio=document.createElement('audio')
    audio.controls=true
    audio.src=URL.createObjectURL(f)

    sold.onclick=()=>{
      if(!beat.classList.contains('soldout')){
        beat.classList.add('soldout')
        sold.textContent='SOLD'
        audio.pause()
        audio.disabled=true
      }else{
        beat.classList.remove('soldout')
        sold.textContent=''
        audio.disabled=false
      }
    }

    beat.append(title,meta,sold,audio)
    document.getElementById('list').appendChild(beat)
  }
}
</script>

</body>
</html>
